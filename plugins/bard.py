import random
from pyrogram import filters
from YukkiMusic import app

# ÙØ±Ù…Ø§Ù† Ø¹Ø´Ù‚
@app.on_message(filters.command(["love", "Ø¹Ø´Ù‚", "Ú©Ø±Ø§Ø´Ù…"], prefixes=["", "/"]) & filters.group)
async def love_command(client, message):
    args = message.text.split()[1:]  # Ø­Ø°Ù ÙØ±Ù…Ø§Ù† Ùˆ Ø¯Ø±ÛŒØ§ÙØª Ø¢Ø±Ú¯ÙˆÙ…Ø§Ù†â€ŒÙ‡Ø§

    # Ú†Ú© Ú©Ø±Ø¯Ù† ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù† Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ø¯Ùˆ Ø¢Ø±Ú¯ÙˆÙ…Ø§Ù†
    if len(args) != 2:
        await message.delete()  # Ù‡ÛŒÚ† Ù¾Ø§Ø³Ø®ÛŒ Ù†Ù…ÛŒâ€ŒØ¯Ù‡Ø¯
        return

    name1 = args[0].strip()
    name2 = args[1].strip()

    # Ø¨Ø±Ø±Ø³ÛŒ ØµØ­Øª ÛŒÙˆØ²Ø±Ù†ÛŒÙ… ÛŒØ§ Ø¢ÛŒâ€ŒØ¯ÛŒ Ø¹Ø¯Ø¯ÛŒ
    if not (is_valid_username_or_id(name1) and is_valid_username_or_id(name2)):
        await message.delete()  # Ù‡ÛŒÚ† Ù¾Ø§Ø³Ø®ÛŒ Ù†Ù…ÛŒâ€ŒØ¯Ù‡Ø¯
        return

    # Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†
    try:
        user1 = await client.get_users(name1)
        user2 = await client.get_users(name2)
    except:
        await message.delete()  # Ø§Ú¯Ø± Ú©Ø§Ø±Ø¨Ø± Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø¨Ø§Ø´Ø¯ØŒ Ù¾Ø§Ø³Ø®ÛŒ Ù†Ù…ÛŒâ€ŒØ¯Ù‡Ø¯
        return

    # Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¯Ø±ØµØ¯ Ø¹Ø´Ù‚
    love_percentage = random.randint(10, 100)
    love_message = get_random_message(love_percentage)

    # Ø§Ù†ØªØ®Ø§Ø¨ Ø§ÛŒÙ…ÙˆØ¬ÛŒ ØªØµØ§Ø¯ÙÛŒ
    love_emoji = random.choice(["â¤ï¸", "ğŸ’–", "ğŸ’", "ğŸ’˜", "ğŸ’•", "ğŸŒ¹", "ğŸ’‘", "ğŸ”¥", "âœ¨"])

    # Ø³Ø§Ø®Øª Ù¾Ø§Ø³Ø®
    response = f"""
{love_emoji} {user1.mention} â¤ï¸ {user2.mention} {love_emoji}

ğŸ“Š Ø¯Ø±ØµØ¯ Ø¹Ø´Ù‚ Ø´Ù…Ø§: {love_percentage}%

ğŸ’Œ Ù¾ÛŒØ§Ù… ÙˆÛŒÚ˜Ù‡:  
{love_message}

âœ¨ Ø¨Ø§ÙˆØ± Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØ¯ Ú©Ù‡ Ø¹Ø´Ù‚ Ù‡Ù…ÛŒØ´Ù‡ Ø±Ø§Ù‡ÛŒ Ù¾ÛŒØ¯Ø§ Ù…ÛŒâ€ŒÚ©Ù†Ø¯! ğŸŒŸ
"""
    # Ø§Ø±Ø³Ø§Ù„ Ù¾Ø§Ø³Ø® Ùˆ Ø­Ø°Ù Ù¾ÛŒØ§Ù… Ú©Ø§Ø±Ø¨Ø±
    await client.send_message(chat_id=message.chat.id, text=response)
    await message.delete()

# ØªÙˆÙ„ÛŒØ¯ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ ØªØµØ§Ø¯ÙÛŒ Ø¹Ø§Ø´Ù‚Ø§Ù†Ù‡ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø¯Ø±ØµØ¯
def get_random_message(love_percentage):
    if love_percentage <= 30:
        return random.choice(
            [
                "ğŸ’” Ø¹Ø´Ù‚ Ø´Ù…Ø§ Ù‡Ù†ÙˆØ² Ù†ÛŒØ§Ø² Ø¨Ù‡ ØµØ¨Ø± Ùˆ ØªÙ„Ø§Ø´ Ø¯Ø§Ø±Ø¯ØŒ Ø§Ù…Ø§ Ù†Ø§Ø§Ù…ÛŒØ¯ Ù†Ø´ÙˆÛŒØ¯.",
                "ğŸŒ± ÛŒÚ© Ø´Ø±ÙˆØ¹ Ú©ÙˆÚ†Ú©ØŒ Ø§Ù…Ø§ Ù‡Ø± Ø¹Ø´Ù‚ÛŒ Ø§Ø² Ù‡Ù…ÛŒÙ†â€ŒØ¬Ø§ Ø¢ØºØ§Ø² Ù…ÛŒâ€ŒØ´ÙˆØ¯.",
                "âœ¨ Ø¨Ø§ Ú©Ù…ÛŒ Ù…Ø±Ø§Ù‚Ø¨Øª Ùˆ ØªÙˆØ¬Ù‡ØŒ Ø´Ø§ÛŒØ¯ Ø§ÛŒÙ† Ø±Ø§Ø¨Ø·Ù‡ Ø´Ú©ÙˆÙØ§ Ø´ÙˆØ¯.",
                "ğŸ§¡ Ù‡Ù†ÙˆØ² Ø¨Ù‡ Ø¬Ø±Ù‚Ù‡â€ŒØ§ÛŒ Ù†ÛŒØ§Ø² Ø¯Ø§Ø±ÛŒØ¯ ØªØ§ Ø¢ØªØ´ Ø¹Ø´Ù‚ Ø±ÙˆØ´Ù† Ø´ÙˆØ¯.",
            ]
        )
    elif love_percentage <= 70:
        return random.choice(
            [
                "ğŸ’“ ÛŒÚ© Ù¾ÛŒÙˆÙ†Ø¯ Ù…Ø­Ú©Ù… Ø¯Ø± Ø­Ø§Ù„ Ø´Ú©Ù„â€ŒÚ¯ÛŒØ±ÛŒ Ø§Ø³Øª. Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ù‡ÛŒØ¯!",
                "ğŸ’– Ø¹Ø´Ù‚ Ù…ÛŒØ§Ù† Ø´Ù…Ø§ Ø¯Ø± Ø­Ø§Ù„ Ø±Ø´Ø¯ Ø§Ø³ØªØŒ Ø¢Ù† Ø±Ø§ Ú¯Ø±Ø§Ù…ÛŒ Ø¨Ø¯Ø§Ø±ÛŒØ¯.",
                "ğŸŒŸ Ø´Ø§Ù†Ø³ Ø®ÙˆØ¨ÛŒ Ø¨Ø±Ø§ÛŒ Ø®ÙˆØ´Ø¨Ø®ØªÛŒ Ø¯Ø§Ø±ÛŒØ¯. Ø§Ø² Ø¢Ù† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.",
                "ğŸ’« Ø¯Ø§Ø³ØªØ§Ù† Ø¹Ø§Ø´Ù‚Ø§Ù†Ù‡ Ø´Ù…Ø§ Ø¯Ø± Ù…Ø³ÛŒØ± Ø²ÛŒØ¨Ø§ÛŒÛŒ Ù¾ÛŒØ´ Ù…ÛŒâ€ŒØ±ÙˆØ¯.",
            ]
        )
    else:
        return random.choice(
            [
                "ğŸ’ Ø¹Ø´Ù‚ Ø´Ù…Ø§ ÛŒÚ© Ø§ÙØ³Ø§Ù†Ù‡ Ø§Ø³Øª! Ù‡Ø± Ù„Ø­Ø¸Ù‡ Ø¢Ù† Ø±Ø§ Ø¬Ø´Ù† Ø¨Ú¯ÛŒØ±ÛŒØ¯.",
                "ğŸ’ Ø§ÛŒÙ† ÛŒÚ© Ù¾ÛŒÙˆÙ†Ø¯ Ø¢Ø³Ù…Ø§Ù†ÛŒ Ø§Ø³Øª! Ø´Ù…Ø§ Ø¨Ø±Ø§ÛŒ Ù‡Ù… Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡â€ŒØ§ÛŒØ¯.",
                "â¤ï¸ Ø³Ø±Ù†ÙˆØ´Øª Ø´Ù…Ø§ Ø±Ø§ Ø¨Ù‡ Ù‡Ù… Ø±Ø³Ø§Ù†Ø¯Ù‡ Ø§Ø³Øª. ØªØ¨Ø±ÛŒÚ© Ù…ÛŒâ€ŒÚ¯ÙˆÛŒÙ…!",
                "ğŸŒ¹ Ø¹Ø´Ù‚ Ø´Ù…Ø§ Ø¨ÛŒâ€ŒÙ¾Ø§ÛŒØ§Ù† Ùˆ Ø¨ÛŒâ€ŒÙ†Ø¸ÛŒØ± Ø§Ø³Øª. Ù‚Ø¯Ø±Ø´ Ø±Ø§ Ø¨Ø¯Ø§Ù†ÛŒØ¯.",
            ]
        )

# Ø¨Ø±Ø±Ø³ÛŒ ØµØ­Øª ÛŒÙˆØ²Ø±Ù†ÛŒÙ… ÛŒØ§ Ø¢ÛŒâ€ŒØ¯ÛŒ Ø¹Ø¯Ø¯ÛŒ
def is_valid_username_or_id(value):
    # Ø¨Ø±Ø±Ø³ÛŒ Ø¢ÛŒâ€ŒØ¯ÛŒ Ø¹Ø¯Ø¯ÛŒ
    if value.isdigit():
        return True
    # Ø¨Ø±Ø±Ø³ÛŒ ÛŒÙˆØ²Ø±Ù†ÛŒÙ…
    if value.startswith("@") and len(value) > 1:
        return True
    return False
